$(document).ready(function(){$.ajaxSetup({headers:{token:"24d5b95c-7cde-11ed-be76-3233f989b8f3"}}),r(),$(document).on("change","#city",function(){$("#district").html(""),$("#ward").html(""),r()}),$(document).on("change","#district",function(){$("#ward").html(""),n()})});function r(){let e=$("#city").val();$.ajax({type:"GET",url:"https://online-gateway.ghn.vn/shiip/public-api/master-data/district",data:{province_id:e}}).done(a=>{let t="";a.data.forEach(i=>{t=`<option value="${i.DistrictID}">${i.DistrictName}</option>`,$("#district").append(t)}),n()})}function n(){let e=$("#district").val();$.ajax({type:"GET",url:"https://online-gateway.ghn.vn/shiip/public-api/master-data/ward",data:{district_id:e}}).done(a=>{let t="";a.data.forEach(i=>{t=`<option value="${i.WardCode}">${i.NameExtension[0]}</option>`,$("#ward").append(t)}),_()})}function _(){let e="3577591",a="1530",t=$("#district").val();$.ajax({type:"GET",url:"https://online-gateway.ghn.vn/shiip/public-api/v2/shipping-order/available-services",data:{shop_id:e,from_district:a,to_district:t}}).done(i=>{let c="1530",l=i.data[0].service_type_id,p=$("#district").val(),s=$("#ward").val(),h={service_type_id:l,insurance_value:5e5,coupon:null,from_district_id:c,to_district_id:p,to_ward_code:s,height:15,length:15,weight:1e3,width:15};$.ajax({type:"GET",url:"https://online-gateway.ghn.vn/shiip/public-api/v2/shipping-order/fee",data:h}).done(u=>{let d=parseInt(u.data.total),o=parseInt($("#total-order-input").val());$("#fee").text(new Intl.NumberFormat().format(d)),$("#total-order").text(new Intl.NumberFormat().format(d+o)),$("#total-order-input").val(d+o)})})}
